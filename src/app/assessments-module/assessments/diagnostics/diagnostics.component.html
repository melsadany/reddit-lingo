<div class="mx-lg-5">
  <p class="py-4 text-center">
    Before we get started, we need to make sure your speakers/headphones and microphone are working properly.
  </p>
  <div *ngIf="!testedAudio && !cantHear" class="text-center">
    <p class="py-4">
      We will play an audio track so you can see if you can hear through your speakers/headphones properly. If you
      can't hear
      the audio, we'll
      give you an opportunity to troubleshoot the audio output on your device on your end before letting you try
      again.
    </p>
    <div *ngIf="heardOnce">
      <mat-spinner [color]="accent" class="text-center"></mat-spinner>
      <button type="button" class="start-button btn btn-success mr-2 mb-2" (click)="completeAudioTest()">I can
        hear the audio properly. Continue.</button>
      <button type="button" class="start-button btn btn-danger mb-2" (click)="waitForTroubleshoot()">I
        can't hear the audio.</button>
    </div>
  </div>
  <div *ngIf="cantHear" class="text-center">
    <p class="py-4">
      Tune the audio output device on your end to ensure that it is not muted and that its volume is turned up far
      enough. When you
      are ready to try the audio diagnostics again, press the button.
    </p>
    <button type="button" class="start-button btn btn-info" (click)="tryAudioAgain()">Try Audio Test Again</button>
  </div>

  <div *ngIf="testedAudio && !testedMic" class="text-center">
    <p class="py-4">We'll test your microphone next. Press the start button to begin a test recording. Your browser
      should request
      access to your microphone. You need to allow the website access to your microphone to continue.
    </p>
    <div class="text-center">
      <button *ngIf="!isRecording && !blobUrl && !cantHearMic" type="button" class="start-button btn btn-info" (click)="startRecording()">Start
        Recording Test</button>
      <button type="button" class="stop-button btn btn-outline-secondary" *ngIf="isRecording && !blobUrl" (click)="stopRecording()">Stop
        recording test</button>
      <mat-spinner *ngIf="isRecording && !blobUrl" [color]="accent" class="text-center mb-2"></mat-spinner>
      <button type="button" class="cancel-button btn btn-danger mr-2 mb-2" *ngIf="!isRecording && blobUrl" (click)="didNotRecordCorrectly()">My
        microphone did not record properly</button>
      <button type="button" class="cancel-button btn btn-success mb-2" *ngIf="!isRecording && blobUrl" (click)="didRecordCorrectly()">My
        microphone is working correctly</button>
      <div class="mt-2" *ngIf="isRecording && !blobUrl"> {{recordedTime}} </div>
    </div>
    <div *ngIf="cantHearMic">
      <p class="py-4">Advice for fixing your mic</p>
      <button type="button" class="cancel-button btn btn-danger mr-2 mb-2" (click)="tryRecordingAgain()">Try
        recording again</button>
    </div>
  </div>
  <div *ngIf="showWaveForm" class="text-center">
    <button type="button" class="start-button btn btn-info" *ngIf="!playingAudio" (click)="playPause()">Start
      Test Audio</button></div>
  <div *ngIf="showWaveForm" class="ws">
    <div class="wavesurfer" #wavesurfer></div>
  </div>

</div>
